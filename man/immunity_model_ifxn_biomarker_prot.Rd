% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/immunity_models.R
\name{immunity_model_ifxn_biomarker_prot}
\alias{immunity_model_ifxn_biomarker_prot}
\title{Immunity model for infection with biomarker-quantity-mediated protection}
\usage{
immunity_model_ifxn_biomarker_prot(
  i,
  t,
  x,
  immune_histories,
  biomarker_states,
  demography,
  biomarker_map,
  model_pars,
  max_events = rep(Inf, dim(immune_histories)[3]),
  cross_reactivity_table = NULL,
  sum_biomarkers = FALSE,
  ...
)
}
\arguments{
\item{i}{integer for the individual ID}

\item{t}{integer for the time period}

\item{x}{integer for the exposure ID}

\item{immune_histories}{a 3D array of immune histories for all individuals, time steps and exposure IDs}

\item{biomarker_states}{an 3D array of biomarker states (biomarker quantities) for all individuals, time steps and biomarker IDs}

\item{demography}{a tibble of demographic information for each individual in the simulation}

\item{biomarker_map}{a table specifying the relationship between exposure IDs and biomarker IDs}

\item{model_pars}{a tibble of parameters needed for the immunity model}

\item{max_events}{a vector of the maximum number of successful exposure events possible for each exposure ID}

\item{cross_reactivity_table}{an optional table which indicates cross-reactivity between exposure and biomarker quantities. Here users can specify whether other biomarker quantities are also protective against successful exposure.  Defaults to NULL.}

\item{sum_biomarkers}{if no \code{cross_reactivity_table} is provided, this flag determines if protection is calculated as the sum of all cross-reactive biomarkers from the \code{biomarker_map}, otherwise only uses biomarker for \code{biomarker_id==exposure_id}}

\item{...}{Additional arguments}
}
\value{
A probability of successful exposure is returned
}
\description{
This immunity model should only be used for infection events. The probability of a successful exposure event is dependent on the individualâ€™s biomarker quantity at the time of exposure. User specified \code{biomarker_prot_midpoint} and \code{biomarker_prot_width} within \code{model_pars} is used to calculate biomarker-mediated protection.
}
\examples{
tmp_immune_history <- array(0, dim=c(1, 10, 1))
## Toy example: individual has 1 prior exposure
tmp_immune_history[1,1,1] <- 1
## Set all biomarker states to 3 for sake of example
tmp_biomarker_states <- array(0, dim=c(1,10,1))
tmp_biomarker_states[1,,1] <- 3
tmp_pars <- reformat_biomarker_map(example_model_pars_biphasic)
## Probability of successful exposure (i.e., infection) depends on the biomarker quantity
immunity_model_ifxn_biomarker_prot(1,8,1,immune_histories=tmp_immune_history, 
biomarker_states=tmp_biomarker_states, demography=NULL, 
biomarker_map=example_biomarker_map_numeric, model_pars=tmp_pars, max_events=c(3,5))
}
